---
title: "Panic!<br>In The Toolshed"
subtitle: "[matt-dray.github.io/government-toolshed](https://matt-dray.github.io/government-toolshed)"
author: "[Matt Dray](https://www.matt-dray.com), June 2023"
format:
  revealjs: 
    theme: [default, assets/styles/toolshed-style.scss]
    menu: true
    code-line-numbers: true
title-slide-attributes:
  data-background-image: assets/images/pegboard-invert.png
  data-background-opacity: "0.1"
  data-notes: |
    * I'm here to talk about making and sharing tools, mostly software, in government.
    * I work at UKHSA, but this is a personal perspective.
    * In these 15 mins or so I'll reflect on a success that has also resulted in some mild panic, and I'll tell you what I learnt.
    * Thank you for coming to my therapy session.
---

## tl;dr {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

1. Sustainabilise
1. Centralise
1. Advertise

::: notes
* 'tl;dr' is 'too long didn't read'. These are the three things that you should consider when building tools. I don't think they're that surprising (even if one of them is not a real word).
* Think sustainably: design your tools so that it's not a problem if you disappear.
* Centralise: store all aspects of the project (code, documentation) in an obvious, open place that others can contribute to.
* Advertise: tell people about the project to help uncover duplication and get them involved.
:::

# An experience {.center data-background-image="assets/images/pegboard-invert.png" data-background-opacity=0.1}

::: notes
* It's easy to hand out platitudes and tell you what to do. Especially because you probably know you should do these things anyway.
* So for credibility I'll give you an example of a tool I created.
* But nothing is ever easy, so I'll tell you about its complications too.
:::

## Thought process (2021) {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

1. There's new [spreadsheet guidance](https://analysisfunction.civilservice.gov.uk/policy-store/releasing-statistics-in-spreadsheets/)
1. Might as well write some functions
1. Other people are probably doing this

::: notes
* Remember 2021? Me neither.
* The [Government Analysis Function](https://analysisfunction.civilservice.gov.uk/) created [new (and very good) guidance](https://analysisfunction.civilservice.gov.uk/policy-store/releasing-statistics-in-spreadsheets/) for releasing statistics in spreadsheets.
* None of the spreadsheets in my team were compliant. Colours, blank columns, multiple headers, footnotes hidden under tables. Classic non-accessible stuff. 
* Also the production process was point-and-click before I joined.
* Given multiple files staggered across releases, it made sense to start with some reusable R functions to apply the new guidance consistently, which later meant it was worthwhile to create a package.
* At the time, there was [the Python package 'gptables'](https://gptables.readthedocs.io/en/latest/) from members of the Analysis Function, but it hadn't yet been updated for the new guidance (it has been now) and there was no native R solution. R users are special and they deserve the very best.
:::

## {.center-h data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

![](assets/images/website-a11ytables.png){alt='A screenshot of the documentation website for the R package called a11ytables. It has several sections of information about the purpose of the package, the license, the authors, and more.'}

[co-analysis.github.io/a11ytables](https://co-analysis.github.io/a11ytables)

::: notes
* And so the {a11ytables} package was created. Entirely for our own use at first, but I got the feeling it would have other interested parties.
* What does it do? You give it your tables of data, along with some metadata like worksheet titles, and it automatically creates an xlsx spreadsheet that is (mostly!) compliant with the guidance. It does the hard work for you, basically.
* This screenshot is the documentation homepage.
:::

# {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

```{r}
#| eval = FALSE,
#| echo = TRUE
remotes::install_github("co-analysis/a11ytables")

a11ytables::create_a11ytable(
  tab_titles,
  sheet_types,
  sheet_titles,
  blank_cells,
  sources,
  tables
) |>
  a11ytables::generate_workbook() |>
  openxlsx::saveWorkbook()
```

::: notes
* The code is openly available on GitHub, so people can freely download it, ask questions, or contribute code.
* Users see only two functions, basically: one to organise the data into a dataframe and a second one to apply the structure and style of a best-practice spreadsheet.
* 
:::

## Success! {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

* It did what I wanted it to do
* I told people about it
* It's in use across government

::: notes
* I used it to successfully create the spreadsheets we needed to release. The lowest bar!
* I spoke to some targeted groups that might find it useful: both internally (i.e. at an NHS-R webinar, at a GSS Champions quarterly meeting, to a Scottish Government R conference) and externally (i.e. a talk at EARL conference 2022, blog posts, social media). It's referenced now from the Analysis Function [spreadsheet guidance](https://analysisfunction.civilservice.gov.uk/policy-store/further-resources-for-releasing-statistics-in-spreadsheets/).
* It's not perfect, but the package is now in use across a number of organisations (CO, MoJ, ONS, DfT, Scot Gov, etc)
:::

## Panic! {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

* The maintainer left the org!
* Should {a11ytables2} exist?
* Where should these things live?

::: notes
* Despite some success, there are some complications.
* I wrote the package in a department that I've now left. My access to the GitHub repo is diminished. How does this impact things?
* {a11ytables} is based on the {openxlsx} package. An {openxlsx2} package is maturing and has better support for a number of features, like automatic font colouring, and should make for more readable code on the backend. So should {a11ytables} be updated? Or is this the chance to make an '{a11ytables2}'?
* This raises a wider question of where this kind of tool should live. It was developed in one particular department on their time, so it 'belongs' to them. But now it's stuck in a liminal space. If it were to move somewhere else, we'd need to think about licensing, broken URLs, burden on new owner, etc.
:::

# Reflection {.center data-background-image="assets/images/pegboard-invert.png" data-background-opacity=0.1}

::: notes
* I think the experience boils down to three things: think sustainably, advertise and centralise.
:::

## 1. Sustainabilise {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

* Build modular things
* Write good documentation
* Plan for your loss

::: {.notes}
* Start small and simple, then build up. 
* Make it easy for you and others to understand the code.
* All of this will make it easier for others to maintain and develop the tool if you leave the project.
:::

## 2. Centralise {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

* Make it discrete
* Make it open
* Pool your tools

::: {.notes}
* Bring together your code in one place; ideally into a package structure if it makes sense. Make it into a defined 'thing' rather than 'a bunch of stuff in a folder'.
* Get it off your local drive and made available to your team, to your org, to the government, and beyond.
* Tools created on government time belong to the taxpayer. Making it open improves transparency, but also makes it much easier for others to collaborate and ask questions. (Yes, I understand that certain things are sensitive and it's not easy to do make them freely available.)
* Try to surface your organisation's tools in one place. 
:::

## 3. Advertise {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

* Talk to people
* Expose duplication early
* Build a community

::: notes
* How can anyone find your project? Talk about it in internal networks, at Coffee & Coding, etc. Expand out to external events even if you don't think there are users there; try Slack, or these Data Science meetups, or even external events. You could inspire someone else.
* The sooner you start talking about it, the sooner you'll find out if it already exists.
* Encourage questions and collaborators to help improve the thing.
* This is not about 'marketing', 'clout', or impressing people. It's about making people's lives easier, including yours.
* The smart ones among you will realise that this is pretty meta: I'm advertising while I tell you to advertise.
:::

# It's not just me {.center data-background-image="assets/images/pegboard-invert.png" data-background-opacity=0.1}

::: notes
* Turns out that there are principles that relate to these ideas already; they just aren't spelled out in a way that's aimed directly at creators of analytical tools like we're talking about today.
:::

## [Gov Design Principles](https://www.gov.uk/guidance/government-design-principles) {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

* Do less
* Iterate, then iterate again
* Make things open, it makes things better

::: notes
* These three points from [the Government Design Principles](https://www.gov.uk/guidance/government-design-principles) are helpful in the context of writing tools as well.
* Principle 2: 'If we’ve found a way of doing something that works, we should make it reusable and shareable instead of reinventing the wheel every time.'
* Principle 5: 'The best way to build good <s>services</s> tools is to start small and iterate wildly.'
* Principle 10: 'Share code, share designs, share ideas, share intentions, share failures.'
:::

## [Tech Code of Practice](https://www.gov.uk/guidance/the-technology-code-of-practice) {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

* Be open and use open source
* Share, reuse and collaborate

::: notes
* The [Technology Code of Practice](https://www.gov.uk/guidance/the-technology-code-of-practice) echoes these sentiments.
* [Criterion 3](https://www.gov.uk/guidance/be-open-and-use-open-source): 'Publish your code and use open source software to improve transparency, flexibility and accountability.'
* [Criterion 8](https://www.gov.uk/guidance/share-and-reuse-technology): 'Avoid duplicating effort and unnecessary costs by collaborating across government and sharing and reusing technology, data, and services.'

:::

# A metaphor {.center data-background-image="assets/images/pegboard-invert.png" data-background-opacity=0.1}

::: notes
* You'll have noticed the idea of a 'toolshed' in the theme of this session.
:::

## {background-image="assets/images/ashim-d-silva-Kw_zQBAChws-unsplash.jpg"}

::: notes
* Is this the current state of things? 
* We know there are tools in use across government that others might be able to use or contribute to, but they're not organised.
* Maybe some are multifaceted instruments, like the Swiss Army knife; maybe some are more blunt, like this tomahawk; maybe some are overcomplicated, like this knife that has a picture of a... knife... on it.
* Is a nail an tool? Maybe it needs a hammer. Where can I find one?
* You get the idea. It's a metaphor.

:::

## {background-image="assets/images/cesar-carlevarino-aragon-NL_DF0Klepc-unsplash.jpg"}

::: notes
* Could this be the future state of things?
* What if we could organise and arrange our tools so everyone can more easily find and use them?
* Fittingly, this image has some empty spots to be filled and also some tools that fill a spot, but don't quit fit the spot. Room to develop?
* But maybe we need something more like a Toolstation (not sponsoring this talk) that has a catlogue that you can peruse.
:::

## tl;dr {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

1. Sustainabilise
1. Centralise
1. Advertise

::: notes
* Think sustainably: design your tools so that it's not a problem if you disappear.
* Centralise: store all aspects of the project (code, documentation) in an obvious, open place that others can contribute to.
* Advertise: tell people about the project to help uncover duplication and get them involved.
:::

## {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

::: notes
:::

## Credits {.center data-background-image="assets/images/pegboard.png" data-background-opacity=0.1}

* <a href="https://unsplash.com/es/@randomlies">Ashim D’Silva</a> on <a href="https://unsplash.com/photos/Kw_zQBAChws">Unsplash</a>.
* <a href="https://unsplash.com/@carlevarino">Cesar Carlevarino Aragon</a> on <a href="https://unsplash.com/photos/NL_DF0Klepc">Unsplash</a>.
* [DM Serif Text](https://fonts.google.com/specimen/DM+Serif+Text/about) by Colophon Foundry.
* [Spline Sans Mono](https://fonts.google.com/specimen/Spline+Sans+Mono/about) by Eben Sorkin and Mirko Velimirović.
* [Quarto](https://quarto.org/) by Posit PBC.

::: notes
:::